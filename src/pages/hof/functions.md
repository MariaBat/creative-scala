## Συναρτήσεις

```tut:invisible
import doodle.core._
import doodle.core.Image._
import doodle.syntax._
import doodle.jvm.Java2DFrame._
import doodle.backend.StandardInterpreter._
```

Όπως μας υποδεικνύει και το μήνυμα λάθους που είδαμε στην προηγούμενη ενότητα, μπορούμε να μετατρέψουμε μια μέθοδο σε συνάρτηση χρησιμοποιώντας τον τελεστή `_` και να την καλέσουμε με τις ίδιες παραμέτρους.


```tut:silent:book
// Παραμετρική εξίσωση για το τριαντάφυλλο με k = 7
def rose(angle: Angle) =
  Point.cartesian((angle * 7).cos * angle.cos, (angle * 7).cos * angle.sin)
```
```tut:book
rose _

(rose _)(0.degrees)
```

Βασικά μια συνάρτηση είναι μια μέθοδος, την οποία όμως μπορούμε να χρησιμοποιήσουμε ως τιμή πρώτης-τάξης:

- μπορούμε να την περάσουμε ως argument ή ως παράμετρο σε μια μέθοδο ή σε μια συνάρτηση,
- μπορούμε να την επιστρέψουμε από μια μέθοδο ή μια συνάρτηση, και
- μπορούμε να της δώσουμε ένα όνομα χρησιμοποιώντας το `val`.

```tut:book
val roseFn = rose _
roseFn(0.degrees)
```


### Τύποι Συναρτήσεων

Για να περάσουμε συναρτήσεις σε μεθόδους πρέπει να ξέρουμε πως να γράφουμε τους τύπους τους (αφού όταν δηλώνουμε μια παράμετρο πρέπει να δηλώσουμε και τον τύπο της).

Ένας τύπος συνάρτησης γράφεται ως `(A, B) => C` όπου `A` και `B` είναι οι τύποι των παραμέτρων και `C` ο τύπος του αποτελέσματος.
Η ίδια αυτή μορφή μπορεί να γενικευτεί για  συναρτήσεις χωρίς καθόλου παραμέτρους ή με οποιονδήποτε αριθμό παραμέτρων.

Στο παράδειγμά μας θέλουμε το `f` να είναι μια συνάρτηση η οποία δέχεται δυο παραμέτρους τύπου `Int` και να επιστρέφει έναν `Int`. Έτσι μπορούμε να την γράψουμε και ως `(Int, Int) => Int`.

<div class="callout callout-info">
#### Σύνταξη Δήλωσης Τύπου Συνάρτησης {-}

Για να δηλώσουμε έναν τύπο συνάρτησης γράφουμε

```scala
(A, B, ...) => C
```

όπου

- τα `A, B, ...` είναι οι τύποι των εισαγόμενων παραμέτρων, και
- το `C` ο τύπος του αποτελέσματος.

Αν μια συνάρτηση έχει μόνο μια παράμετρο, οι παρενθέσεις δεν είναι απαραίτητες:

```scala
A => B
```
</div>


### Κυριολεκτικά Συναρτήσεων

Υπάρχει μια κυριολεκτική σύνταξη για συναρτήσεις.
Για παράδειγμα, παρακάτω μπορείτε να δείτε μια συνάρτηση η οποία προσθέτει τον αριθμό `42` στην παράμετρο της.

```tut:book
(x: Int) => x + 42
```

Μπορούμε να εφαρμόσουμε την συνάρτηση σε ένα argument.

```tut:book
val add42 = (x: Int) => x + 42
add42(0)
```

<div class="callout callout-info">
#### Σύνταξη Συνάρτησης με Κυριολεκτικά {-}

Η σύνταξη δήλωσης ενός κυριολεκτικού συνάρτησης είναι η παρακάτω

```scala
(parameter: type, ...) => expression
```

όπου
- τα προαιρετικά `parameter` είναι τα ονόματα των παραμέτρων της συνάρτησης,
- τα `type` είναι οι τύποι των παραμέτρων της, και
- το `expression` καθορίζει το αποτέλεσμα της.
</div>


### Συναρτήσεις και Αντικείμενα

Επειδή η Scala είναι αντικειμενοστραφής γλώσσα, όλες οι τιμές πρώτης-τάξης είναι αντικείμενα.
Αυτό σημαίνει ότι οι συναρτήσεις μπορούν να έχουν μεθόδους, συμπεριλαμβανομένου μερικών πολύ χρήσιμων για σύνθεση:

```tut:book
val addTen = (a: Int) => a + 10
val double = (a: Int) => a * 2
val combined = addTen andThen double // this composes the two functions
combined(5)
```

#### Ασκήσεις {-}

##### Τύποι Συναρτήσεων {-}

Ποιoς είναι ο τύπος της παραπάνω συνάρτησης `roseFn`; Τι σημαίνει αυτός ο τύπος;

<div class="solution">
Ο τύπος της είναι `Angle => Point`. Αυτό σημαίνει ότι η `roseFn` είναι μια συνάρτηση η οποία παίρνει μόνο μία παράμετρο τύπου `Angle` και επιστρέφει μια τιμή με τύπο `Point`. Με άλλα λόγια, η `roseFn` μετατρέπει ένα `Angle` σε `Point`.
</div>

##### Κυριολεκτικά Συναρτήσεων {-}

Γράψτε την `roseFn` ως κυριολεκτικό συνάρτησης.

<div class="solution">
```tut:book
val roseFn = (angle: Angle) =>
  Point.cartesian((angle * 7).cos * angle.cos, (angle * 7).cos * angle.sin)
```
</div>


